/* Estilos específicos para la sección de combate que NO están ya en styles.css */

/* Estilo para el contenedor del título de Combate (si necesitas un estilo diferente al de Bestiario) */
.combate-header-container {
    margin-bottom: 20px; 
}

/* Estilos para los controles de configuración dentro de la caja translúcida */
.controles { /* Asegúrate de que esta clase sea 'controles' y no 'controles-combate' */
    margin-top: 20px; 
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    padding: 15px;
    background: rgba(0, 0, 0, 0.3); 
    border-radius: 5px;
    width: 100%; 
    max-width: 400px; 
    box-sizing: border-box; 
}

.input-group {
    display: flex;
    flex-direction: column;
    margin-bottom: 10px;
}

.input-group label {
    color: #cbd5e0;
    margin-bottom: 5px;
    font-size: 0.9em;
}

.input-group input[type="number"] {
    padding: 8px 10px;
    border: 1px solid #4a5568;
    border-radius: 4px;
    background-color: #2d3748;
    color: #f7fafc;
    text-align: center;
    width: 80px; /* Ajusta el ancho de los inputs de num jugadores/enemigos */
}

/* Tablero de combate y contenedor de personajes */
.tablero-combate-container {
    margin-top: 20px;
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 8px;
    padding: 20px;
    min-height: 400px; /* Altura mínima para el tablero */
    position: relative; /* Para posicionar elementos internos */
    display: flex; /* Para organizar los personajes */
    flex-wrap: wrap; /* Permitir que los personajes se envuelvan */
    gap: 15px; /* Espacio entre personajes */
    justify-content: flex-start; /* Alinea los personajes al principio */
    align-content: flex-start; /* Alinea las filas al principio */
    overflow-y: auto; /* Para scroll si hay muchos personajes */
    max-height: calc(100vh - 200px); /* Ajustar la altura máxima si es necesario */
}

/* Estilo para los recuadros de personaje */
.personaje-recuadro {
    background-color: #37474F; /* Un tono más oscuro para las fichas */
    border: 1px solid #4a5568;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    min-width: 180px; /* Ancho mínimo para la ficha */
    max-width: 250px; /* Ancho máximo, ajusta según el contenido */
    display: flex;
    flex-direction: column;
    gap: 10px; /* Espacio entre elementos internos de la ficha */
    color: #f7fafc;
    position: relative;
    cursor: grab; /* Indica que es arrastrable */
    transition: all 0.2s ease; /* Transición suave para arrastre */
}

.personaje-recuadro:hover {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    transform: translateY(-2px);
}

.personaje-recuadro.dragging {
    opacity: 0.5; /* Reduce la opacidad al arrastrar */
    border: 1px dashed #d69e2e;
}

.personaje-recuadro.drag-over-target {
    border: 2px solid #d69e2e; /* Resaltar el objetivo del drop */
    box-shadow: 0 0 15px #d69e2e;
}

/* Estilos para el campo de nombre */
.personaje-header {
    margin-bottom: 5px;
}

.personaje-nombre {
    background-color: #2d3748;
    border: 1px solid #4a5568;
    border-radius: 4px;
    color: #f7fafc;
    padding: 5px 8px;
    width: 100%;
    box-sizing: border-box; /* Incluye padding y border en el ancho */
    font-size: 1em;
    font-weight: bold;
    text-align: center;
}

/* Estilos para la fila de PV y PM */
.stats-row {
    display: flex; /* Contenedor flex para PV y PM */
    gap: 8px; /* Un poco menos de espacio entre ellos para que quepan */
    justify-content: space-between; /* Distribuye PV y PM para ocupar el espacio */
    align-items: flex-end; /* Alinea los inputs y botones en la parte inferior */
    width: 100%; /* Asegúrate de que ocupe todo el ancho disponible en la ficha */
    box-sizing: border-box; /* Crucial para los anchos */
}

.pv-control-group {
    display: flex;
    flex-direction: column; /* Label arriba del input+botones */
    align-items: center; /* Centra el label y el input/botones horizontalmente */
    flex-grow: 1; /* Permite que crezcan para ocupar el espacio disponible */
    flex-basis: 0; /* Base cero para el crecimiento uniforme */
    min-width: 70px; /* Ancho mínimo para cada grupo (PV o PM) */
    box-sizing: border-box;
}

.pv-control-group label {
    font-size: 0.9em;
    color: #cbd5e0;
    margin-bottom: 3px;
    white-space: nowrap; /* Evita que el texto de la etiqueta se rompa */
}

.pv-input-wrapper {
    display: flex;
    align-items: center;
    /* No establecer width aquí, deja que el input y los botones determinen el ancho */
}

/* Estrechar el input de PV y PM */
.personaje-stat-input {
    width: 45px; /* Ancho más estrecho para dos dígitos */
    max-width: 45px; /* Asegura que no crezca más */
    padding: 4px 2px; /* Reducir padding */
    border: 1px solid #4a5568;
    border-radius: 4px;
    background-color: #2d3748;
    color: #f7fafc;
    text-align: center;
    -moz-appearance: textfield; /* Oculta las flechas por defecto en Firefox */
    font-size: 0.9em; /* Fuente un poco más pequeña */
    box-sizing: border-box; /* Incluye padding y border en el ancho */
}

/* Ocultar flechas de input number en Chrome/Safari/Edge */
.personaje-stat-input::-webkit-outer-spin-button,
.personaje-stat-input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

.pv-controles {
    display: flex;
    flex-direction: column;
    margin-left: 5px;
    /* Asegura que los botones ocupen el espacio vertical necesario para la altura del input */
    height: 100%; /* Asegura que los botones se estiren con el input si es necesario */
    justify-content: center; /* Centra los botones verticalmente */
}

.pv-controles button {
    background-color: #d69e2e;
    color: #1a202c;
    border: none;
    padding: 2px 5px;
    border-radius: 3px;
    cursor: pointer;
    font-size: 0.8em;
    line-height: 1; /* Asegura que los triángulos se vean bien */
    height: 15px; /* Altura fija para botones */
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s;
}

.pv-controles button:hover {
    background-color: #e6a836;
}

.pv-controles button:first-child {
    margin-bottom: 2px; /* Espacio entre los botones de flecha */
}

/* Estilos para el cuadro de notas */
.notes-group {
    display: flex;
    flex-direction: column;
    margin-top: 10px;
}

.notes-group label {
    font-size: 0.9em;
    color: #cbd5e0;
    margin-bottom: 3px;
}

.personaje-notas {
    background-color: #2d3748;
    border: 1px solid #4a5568;
    border-radius: 4px;
    color: #f7fafc;
    padding: 5px 8px;
    width: 100%;
    min-height: 50px; /* Altura mínima del textarea */
    resize: vertical; /* Permitir redimensionar solo verticalmente */
    font-size: 0.85em;
    box-sizing: border-box; /* Incluye padding y border en el ancho */
}

/* Estilos para la imagen de guerrero */
.eurmal-image-container {
    flex: 0 0 250px; /* Ancho fijo para la imagen */
    margin-left: 20px;
    display: flex;
    align-items: center; /* Centrar verticalmente */
    justify-content: center; /* Centrar horizontalmente */
}

.eurmal-image {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
}

/* Media queries para responsividad (mantener o ajustar si es necesario) */
@media (max-width: 992px) {
    .varita-layout-container {
        flex-direction: column;
        align-items: center;
    }

    .eurmal-image-container {
        margin-left: 0;
        margin-top: 20px;
    }
}

@media (max-width: 768px) {
    .personaje-recuadro {
        min-width: 100%; /* Las fichas ocupan todo el ancho en pantallas pequeñas */
        max-width: none;
    }
    .stats-row {
        flex-direction: column; /* PV y PM en columnas en pantallas pequeñas */
        align-items: flex-start;
    }
    .pv-control-group {
        width: 100%;
    }
}